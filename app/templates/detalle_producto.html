{% extends "header.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/detalle_producto.css') }}">
{% endblock %}

{% block content %}
<div class="main-container">
    <main class="producto-detalle">
        <div class="imagen">
            <img src="{{ producto.imagenes[0] if producto.imagenes else 'https://via.placeholder.com/300' }}" alt="{{ producto.nombre }}">
        </div>
        <div class="info">
            <h2>{{ producto.nombre }}</h2>
            <p><strong>ID del producto:</strong> {{ producto._id }}</p>
            <p><strong>Precio:</strong> ${{ producto.precio }}</p>
            <p><strong>Descripci칩n:</strong> {{ producto.descripcion }}</p>
            <div class="cantidad">
                <label for="cantidad">Cantidad:</label>
                <input type="number" id="cantidad" name="cantidad" value="1" min="1" max="{{ producto.stock }}">
            </div>
            <button onclick="a침adirAlCarrito('{{ producto._id }}')">A침adir al Carrito</button>
        </div>
    </main>
</div>

<script>
    async function a침adirAlCarrito(productoId) {
        const cantidad = document.getElementById('cantidad').value;
        const response = await fetch('/api/carrito/agregar', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ producto_id: productoId, cantidad: parseInt(cantidad) })
        });
        const data = await response.json();
        alert(data.mensaje);
    }
</script>
{% endblock content%}


